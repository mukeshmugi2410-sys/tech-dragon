{% extends "base.html" %}
{% block title %}Manual Attendance - HR{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2><i class="fas fa-user-clock me-2"></i>Manual Attendance Entry</h2>
    <a href="/hr/attendance" class="btn btn-outline-primary">
        <i class="fas fa-arrow-left me-1"></i>Back to Attendance
    </a>
</div>

<div class="dashboard-card">
    <h4 class="mb-4">Add/Edit Attendance Manually</h4>
    
    <form method="post" action="{{ url_for('hr_manual_attendance') }}">
        <div class="row">
            <div class="col-md-4 mb-3">
                <label class="form-label">Select Employee</label>
                <select name="employee_id" class="form-select" required>
                    <option value="">Select Employee</option>
                    {% for e in employees %}
                    <option value="{{ e.id }}">{{ e.name }} ({{ e.position }})</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="col-md-4 mb-3">
                <label class="form-label">Date</label>
                <input type="date" name="date" class="form-control" required 
                       value="{{ now.strftime('%Y-%m-%d') }}">
            </div>
            
            <div class="col-md-4 mb-3">
                <label class="form-label">Status</label>
                <select name="status" class="form-select" required>
                    <option value="Present">Present</option>
                    <option value="Absent">Absent</option>
                    <option value="Half Day">Half Day</option>
                    <option value="Leave">On Leave</option>
                </select>
            </div>
            
            <div class="col-md-6 mb-3">
                <label class="form-label">Check In Time</label>
                <input type="time" name="check_in" class="form-control">
                <small class="text-muted">Leave empty if absent or on leave</small>
            </div>
            
            <div class="col-md-6 mb-3">
                <label class="form-label">Check Out Time</label>
                <input type="time" name="check_out" class="form-control">
                <small class="text-muted">Leave empty if absent or on leave</small>
            </div>
            
            <div class="col-12 mb-4">
                <div class="alert alert-info">
                    <h6><i class="fas fa-info-circle me-2"></i>Instructions:</h6>
                    <ul class="mb-0">
                        <li>Select the employee and date for attendance entry</li>
                        <li>Choose status: Present, Absent, Half Day, or On Leave</li>
                        <li>For Present status, enter check-in and check-out times</li>
                        <li>For Absent or Leave status, time fields can be left empty</li>
                        <li>This will overwrite any existing attendance for the selected date</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="d-flex justify-content-between">
            <button type="reset" class="btn btn-secondary">Reset Form</button>
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save me-2"></i>Save Attendance
            </button>
        </div>
    </form>
</div>

<!-- Recent Manual Entries -->
<div class="dashboard-card mt-4">
    <h4 class="mb-4"><i class="fas fa-history me-2"></i>Recent Manual Entries</h4>
    <div class="table-responsive">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Employee</th>
                    <th>Status</th>
                    <th>Check In</th>
                    <th>Check Out</th>
                    <th>Modified By</th>
                    <th>Modified At</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>{{ now.strftime('%Y-%m-%d') }}</td>
                    <td>John Doe</td>
                    <td><span class="badge bg-success">Present</span></td>
                    <td>09:05</td>
                    <td>18:15</td>
                    <td>{{ session.user_name }}</td>
                    <td>Today 09:10</td>
                </tr>
                <tr>
                    <td>{{ now.strftime('%Y-%m-%d') }}</td>
                    <td>Jane Smith</td>
                    <td><span class="badge bg-info">On Leave</span></td>
                    <td>--</td>
                    <td>--</td>
                    <td>{{ session.user_name }}</td>
                    <td>Today 10:30</td>
                </tr>
                <tr>
                    <td>{{ (now - timedelta(days=1)).strftime('%Y-%m-%d') }}</td>
                    <td>Robert Johnson</td>
                    <td><span class="badge bg-warning">Half Day</span></td>
                    <td>09:00</td>
                    <td>13:00</td>
                    <td>{{ session.user_name }}</td>
                    <td>Yesterday 14:00</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
{% endblock %}